
Давайте рассмотрим пример открытия и закрытия файла:
```cpp
#include <iostream>
#include <fstream>

int main() {
    std::ifstream inputFile;
    inputFile.open("example.txt"); // Открываем файл example.txt для чтения

    if (inputFile.is_open()) {
        // Файл успешно открыт, выполняем операции с данными

        inputFile.close(); // Закрываем файл
    } else {
        std::cout << "Не удалось открыть файл." << std::endl;
    }

    return 0;
}
```

В этом примере мы открываем файл "example.txt" для чтения с помощью объекта `ifstream`. Мы проверяем, успешно ли открылся файл с помощью метода `is_open()`, и если файл был открыт успешно, выполняем операции с данными. В конце мы закрываем файл с помощью метода `close()`.

Чтение и запись данных в файл:
Когда файл открыт для чтения или записи, мы можем выполнять операции чтения и записи данных. В C++ есть несколько способов чтения и записи данных в файл. Мы можем работать с файлами посимвольно, построчно или блоками данных. 

Для чтения данных из файла посимвольно мы можем использовать метод `get()` или оператор извлечения `>>`. Например:

```cpp
char ch;
inputFile.get(ch); // Чтение символа из файла

char ch2;
inputFile >> ch2; // Чтение символа из файла с использованием оператор

извлечения

Для записи данных в файл посимвольно мы можем использовать метод `put()` или оператор вставки `<<`. Например:

```cpp
char ch = 'A';
outputFile.put(ch); // Запись символа в файл

char ch2 = 'B';
outputFile << ch2; // Запись символа в файл с использованием оператора вставки
```

Кроме того, мы также можем читать и записывать данные в файл построчно. Для чтения строки из файла мы можем использовать функцию `getline()`, а для записи строки в файл - оператор вставки `<<`. Примеры:

```cpp
std::string line;
std::getline(inputFile, line); // Чтение строки из файла

std::string line2 = "Hello, world!";
outputFile << line2; // Запись строки в файл
```

Если нам необходимо читать или записывать данные блоками (например, массивы или структуры), мы можем использовать методы `read()` и `write()`. Примеры:

```cpp
char buffer[100];
inputFile.read(buffer, sizeof(buffer)); // Чтение блока данных из файла

char buffer2[100];
outputFile.write(buffer2, sizeof(buffer2)); // Запись блока данных в файл
```

Важно проверять успешность операций чтения и записи, чтобы убедиться, что данные были корректно прочитаны или записаны в файл.

Позиционирование в файле:
Иногда нам может потребоваться перемещаться по файлу или получать информацию о текущей позиции в файле. Для этого в C++ есть несколько функций позиционирования: `seekg()`, `seekp()`, `tellg()` и `tellp()`. 

Функции `seekg()` и `seekp()` позволяют устанавливать позицию чтения и записи соответственно. Например:

```cpp
inputFile.seekg(0); // Устанавливаем позицию чтения в начало файла
outputFile.seekp(10); // Устанавливаем позицию записи на 10-й байт файла
```

Функции `tellg()` и `tellp()` возвращают текущую позицию чтения и записи в файле соответственно. Примеры:

```cpp
std::streampos readPos = inputFile.tellg(); // Получаем текущую позицию чтения
std::streampos writePos = outputFile.tellp(); // Получаем текущую позицию записи
```

Позиционирование может быть полезным при чтении или записи данных в конкретном месте файла или при выполнении некоторых операций с данными.

Обработка ошибок и исключения:
Важно учесть возможность ошибок при работе с файлами. Например, файл может не существовать, может возникнуть ошибка доступа или нехватка памяти

для открытия файла. В C++ мы можем использовать исключения для обработки таких ошибок и предотвращения непредвиденных ситуаций.

Пример использования исключений при работе с файлами:

```cpp
#include <iostream>
#include <fstream>
#include <stdexcept>

int main() {
    std::ifstream inputFile;
    inputFile.open("example.txt");

    if (inputFile.is_open()) {
        try {
            // Операции с данными из файла

            inputFile.close();
        } catch (const std::exception& e) {
            std::cout << "Ошибка при работе с файлом: " << e.what() << std::endl;
        }
    } else {
        std::cout << "Не удалось открыть файл." << std::endl;
    }

    return 0;
}
```

В этом примере мы помещаем операции чтения данных из файла в блок `try` и ловим исключения с помощью блока `catch`. Если возникает исключение при работе с файлом, мы выводим соответствующее сообщение об ошибке.

Работа с директориями и файловой системой:
В дополнение к чтению и записи данных в файлах, C++ также предоставляет возможности для работы с директориями и манипуляции файловой системой. Мы можем создавать, переименовывать и удалять файлы, а также работать с директориями.

Примеры операций с файловой системой:

```cpp
#include <iostream>
#include <fstream>
#include <filesystem>

int main() {
    std::filesystem::path filePath = "example.txt";

    // Создание файла
    std::ofstream outputFile(filePath);
    outputFile << "Hello, world!";
    outputFile.close();

    // Переименование файла
    std::filesystem::path newFilePath = "new_example.txt";
    std::filesystem::rename(filePath, newFilePath);

    // Удаление файла
    std::filesystem::remove(newFilePath);

    // Создание директории
    std::filesystem::path dirPath = "example_dir";
    std::filesystem::create_directory(dirPath);

    return 0;
}
```

В этом примере мы создаем файл "example.txt", записываем в него данные, а затем переименовываем его в "new_example.txt". После этого мы удаляем файл "new_example.txt" и создаем директорию "example_dir".

Практические примеры и задания:
На этом этапе лекции мы предлагаем студентам решить несколько практических задач, связанных с работой с файлами в C++. Это поможет им закрепить полученные знания и навыки. Мы также разбираем примеры кода, демонстрирующие более сложные операции с файлами и файловой системой.

Заключение:
На протяжении этой лекции мы изучили основы работы с файлами в C++. Мы рассмотрели открытие и закрытие файлов, чтение и запись данных в файлы, позиционирование в файле, обработку ошибок и исключений, а также работу с директориями и файловой системой.

Работа с файлами является важной частью программирования, и знание основных операций с файлами в C++ позволит вам эффективно работать с данными и сохранять их между запусками программы.


----------------------------------------------------------------
5. Работа с указателями на файлы (15 минут)
   - Основы работы с указателями на файлы.
   - Использование указателей для чтения и записи данных.
   - Проверка успешности операций с указателем.
   - Освобождение ресурсов, связанных с указателем на файл.

При работе с файлами в C++, указатели на файлы предоставляют дополнительный уровень гибкости и контроля над операциями чтения и записи. Вот некоторые ключевые аспекты работы с указателями на файлы:

1. Основы работы с указателями на файлы:
   - Указатель на файл представляет собой объект, который указывает на определенную позицию в файле.
   - Используя указатель на файл, можно выполнять операции чтения и записи данных из и в файл.

2. Использование указателей для чтения и записи данных:
   - Указатель на файл можно использовать совместно с функциями чтения и записи, такими как `fread()`, `fwrite()`, `fscanf()`, `fprintf()` и другими.
   - Пример чтения данных с использованием указателя на файл:
     ```cpp
     FILE* file = fopen("input.txt", "r");
     if (file != nullptr) {
         char buffer[100];
         fgets(buffer, 100, file);
         printf("%s", buffer);
         fclose(file);
     }
     ```
   - Пример записи данных с использованием указателя на файл:
     ```cpp
     FILE* file = fopen("output.txt", "w");
     if (file != nullptr) {
         char data[] = "Hello, World!";
         fputs(data, file);
         fclose(file);
     }
     ```

3. Проверка успешности операций с указателем:
   - При работе с указателями на файлы, необходимо проверять успешность операций чтения и записи.
   - Функции чтения и записи возвращают значения, которые могут быть использованы для проверки успешности операции.
   - Например, функция `fread()` возвращает количество прочитанных элементов, а функция `fwrite()` возвращает количество записанных элементов. Если возвращенное значение отличается от ожидаемого, это может указывать на проблемы при чтении или записи данных.

4. Освобождение ресурсов, связанных с указателем на файл:
   - После завершения работы с указателем на файл, необходимо освободить ресурсы, связанные с файлом.
   - Для этого следует вызвать функцию `fclose()`, передав указатель на файл в качестве аргумента.
   - Это позволяет закрыть файл и освободить ресурсы, связанные с файловым дескриптором.

Важно отметить, что в C++ предпочтительнее использов